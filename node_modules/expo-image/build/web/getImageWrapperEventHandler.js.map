{"version":3,"file":"getImageWrapperEventHandler.js","sourceRoot":"","sources":["../../src/web/getImageWrapperEventHandler.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,gBAAgB,EAAE,MAAM,yBAAyB,CAAC;AAE3D,MAAM,UAAU,2BAA2B,CACzC,MAAsC,EACtC,MAAmB;IAEnB,OAAO;QACL,MAAM,EAAE,CAAC,KAAK,EAAE,EAAE;YAChB,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;YAE3C,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;gBACjC,4JAA4J;gBAC5J,MAAM,CAAC,qBAAqB,CAAC,GAAG,EAAE;oBAChC,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;gBAC3C,CAAC,CAAC,CAAC;aACJ;QACH,CAAC;QACD,eAAe,EAAE,GAAG,EAAE,CAAC,MAAM,EAAE,eAAe,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;QACrE,OAAO,EAAE,GAAG,EAAE;YACZ,4FAA4F;YAC5F,IAAI,MAAM,EAAE,GAAG,IAAI,gBAAgB,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;gBAChD,OAAO;aACR;YACD,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,EAAE,MAAM,IAAI,IAAI,EAAE,CAAC,CAAC,CAAC;QACnE,CAAC;KACF,CAAC;AACJ,CAAC","sourcesContent":["import { ImageWrapperEvents } from './ImageWrapper.types';\nimport { ImageSource } from '../Image.types';\nimport { isBlurhashString } from '../utils/resolveSources';\n\nexport function getImageWrapperEventHandler(\n  events: ImageWrapperEvents | undefined,\n  source: ImageSource\n) {\n  return {\n    onLoad: (event) => {\n      events?.onLoad?.forEach((e) => e?.(event));\n\n      if (typeof window !== 'undefined') {\n        // On Web there is no way to detect when the image gets displayed, but we can assume it happens on the repaint right after the image is successfully loaded.\n        window.requestAnimationFrame(() => {\n          events?.onDisplay?.forEach((e) => e?.());\n        });\n      }\n    },\n    onTransitionEnd: () => events?.onTransitionEnd?.forEach((e) => e?.()),\n    onError: () => {\n      // A temporary workaround for blurhash blobs throwing opaque errors when used in an img tag.\n      if (source?.uri && isBlurhashString(source?.uri)) {\n        return;\n      }\n      events?.onError?.forEach((e) => e?.({ source: source || null }));\n    },\n  };\n}\n"]}